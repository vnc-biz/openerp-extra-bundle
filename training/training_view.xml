<?xml version="1.0" encoding="UTF-8"?>
<openerp>
    <data>
  
<!-- training.course.theme -->
        <record model="ir.ui.view" id="course_theme_form">
            <field name="name">training.course.theme.form</field>
            <field name="model">training.course.theme</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Theme">
                    <separator string="Theme" colspan="4"/>
                    <field name="name"/>
                    <field name="parent_id"/>
                    <field name="priority"/>
                    <field name="active"/>
                    <separator string="Description" colspan="4"/>
                    <field name="description" nolabel="1" colspan="4"/>
                </form>
            </field>
        </record>
        <record model="ir.ui.view" id="course_theme_tree">
            <field name="name">training.course.theme.tree</field>
            <field name="model">training.course.theme</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Themes">
                    <field name="name"/>
                    <field name="parent_id"/>
                    <field name="priority"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="course_theme_all_act">
            <field name="name">Themes of courses</field>
            <field name="res_model">training.course.theme</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.course_category -->
        <record model="ir.ui.view" id="training_course_category_form">
            <field name="name">training.course_category.form</field>
            <field name="model">training.course_category</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Product Line">
                    <separator string="Product Line Description" colspan="4"/>
                    <field name="name" string="Code" select="1"/>
                    <field name="parent_id" string="Parent"/>
                    <notebook colspan="4">
                        <page string="Description">
                            <field name="description" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Partners &amp; Pricelist">
                            <separator string="Pricelist" colspan="4"/>
                            <field name="price_list_id"/>
                            <separator string="Partners" colspan="4"/>
                            <field name="partner_ids" colspan="4" nolabel="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_course_category_tree">
            <field name="name">training.course_category.tree</field>
            <field name="model">training.course_category</field>
            <field name="type">tree</field>
            <field name="field_parent">child_ids</field>
            <field name="arch" type="xml">
                <tree string="Product Lines">
                    <field name="complete_name" string="Code"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

<!--        <record model="ir.actions.act_window" id="open_training_course_by_category_all_act">-->
<!--            <field name="name">Courses</field>-->
<!--            <field name="res_model">training.course</field>-->
<!--            <field name="view_type">form</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--            <field name="domain">[('category_id', '=', active_id)]</field>-->
<!--        </record>-->

<!--        <record model="ir.values" id="ir_action_course_by_category">-->
<!--            <field name="key2" eval="'tree_but_open'"/>-->
<!--            <field name="model" eval="'training.course_category'"/>-->
<!--            <field name="name">Courses By Product Line</field>-->
<!--            <field name="value" eval="'ir.actions.act_window,%d'%open_training_course_by_category_all_act"/>-->
<!--            <field name="object" eval="True"/>-->
<!--        </record>-->

<!--        <record model="ir.actions.act_window" id="training_course_by_category_all_act">-->
<!--            <field name="name">Course Structure (By Product Line)</field>-->
<!--            <field name="res_model">training.course_category</field>-->
<!--            <field name="view_type">tree</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--        </record>-->

        <!-- Tree view for all category course -->
        <record model="ir.actions.act_window" id="training_course_category_all_act">
            <field name="name">Product Lines</field>
            <field name="res_model">training.course_category</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
        </record>


<!-- training.course_type -->
        <record model="ir.ui.view" id="training_course_type_form">
            <field name="name">training.course_type.form</field>
            <field name="model">training.course_type</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Type">
                    <separator string="Course Type Description" colspan="4"/>
                    <field name="name"/>
                    <notebook colspan="4">
                        <page string="General">
                            <separator string="Limits" colspan="4"/>
                            <field name="min_limit"/>
                            <field name="max_limit"/>
                            <separator string="Description" colspan="4"/>
                            <field name="description" nolabel="1" colspan="4"/>
                            <separator string="Objective" colspan="4"/>
                            <field name="objective" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Cost Prices">
                            <field name="product_id" required="1"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_course_type_tree">
            <field name="name">training.course_type.tree</field>
            <field name="model">training.course_type</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Types">
                    <field name="name"/>
                    <field name="min_limit"/>
                    <field name="max_limit"/>
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_course_type_all_act">
            <field name="name">Levels</field>
            <field name="res_model">training.course_type</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.offer.format -->
        <record model="ir.ui.view" id="training_offer_format_form">
            <field name="name">training.offer.format.form</field>
            <field name="model">training.offer.format</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Format">
                    <field name="name"/>
                    <field name="active"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_offer_format_tree">
            <field name="name">training.offer.format.tree</field>
            <field name="model">training.offer.format</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Format">
                    <field name="name"/>
                    <field name="active"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_offer_format_all_act">
            <field name="name">Offer/Session Format</field>
            <field name="res_model">training.offer.format</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.course.pending.wizard -->
        <record model="ir.ui.view" id="wizard_course_pending_form">
            <field name="name">wizard.course.pending.form</field>
            <field name="model">training.course.pending.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Course Pending" col="2">
                    <field name="course_id" invisible="1"/>
                    <field name="type" colspan="2"/>
                    <field name="date"/>
                    <field name="job_id"/>
                    <field name="reason" colspan="2"/>
                    <separator string="" colspan="2"/>
                    <group col="2" colspan="2">
                        <button name="action_cancel" type="object" special="cancel" string="Cancel" icon="gtk-cancel"/>
                        <button name="action_apply" type="object" string="Apply" icon="gtk-apply"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="wizard_course_pending">
            <field name="name">wizard.course.pending</field>
            <field name="res_model">training.course.pending.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

<!-- training.course views & actions -->
       <record id="training_course_filter" model="ir.ui.view">
            <field name="name">training.course.search</field>
            <field name="model">training.course</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Course">
                   <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Draft" domain="[('state_course','=', 'draft')]"/>
                        <filter icon="terp-camera_test" string="Validated" domain="[('state_course','=', 'validated')]"/>
                        <filter icon="terp-tools" string="Ask Reviews" domain="[('pending_ids.state','=','pending')]" help="Course Pending Reviews."/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-personal+" string="My Courses" domain="['|',('create_uid', '=', uid)]" help="Courses in which I create." default="1"/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Name"/>
                        <field name="long_name" string="Long Name"/>
                   </group>
                   <newline/>
                   <group expand="0" string="Group By...">
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]"  context="{'group_by':'state_course'}"/>
                        <filter string="Type" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'course_type_id'}"/>
                        <filter string="Product Line" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by' : 'category_id'}"/>
                        <filter string="Kind" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by' : 'kind'}"/>
                        <filter string="Language" icon="terp-stage" domain="[]" context="{'group_by' : 'lang_id'}"/>
                        <filter string="Master Course" icon="terp-report" domain="[]" context="{'group_by' : 'reference_id'}"/>
                   </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_course_form">
            <field name="name">training.course.form</field>
            <field name="model">training.course</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Course">
                    <separator string="Course Description" colspan="4"/>
                    <field name="p_id" invisible="1"/>
                    <field name="name" string="Short Name" select="1" required="True"/>
                    <field name="category_id" attrs="{'required' : [('p_id', '=', False)], 'readonly' : [('p_id', '!=', False)] }"/>
                    <notebook colspan="4">
                        <page string="General">
                            <field name="long_name" attrs="{'readonly' : [('p_id', '!=', False)]}" colspan="4"/>
                            <field name="course_type_id" select="1" attrs="{'required' : [('p_id', '=', False)], 'readonly' : [('p_id', '!=', False)]}"/>
                            <field name="kind" select="2"/>
                            <field name="lang_id" attrs="{'readonly' : [('p_id', '!=', False)]}"/>
                            <field name="reference_id" on_change="on_change_reference(reference_id)" attrs="{'readonly' : [('p_id', '!=', False)]}"/>
                            <field name="with_children" invisible="1"/>
                            <group colspan="2" col="2">
                                <group attrs="{'invisible' : [('with_children', '=', True)]}" colspan="1">
                                    <field name="duration_without_children" widget="float_time"/>
                                </group>
                                <group attrs="{'invisible' : [('with_children', '=', False)]}" colspan="1">
                                    <field name="duration_with_children" widget="float_time"/>
                                </group>
                            </group>
                            <field name="splitted_by" attrs="{'readonly' : [('p_id', '!=', False)]}"/>
                            <separator string="Note" colspan="4"/>
                            <field name="internal_note" nolabel="1" colspan="4"/>
                            <separator string="Themes" colspan="4"/>
                            <field name="theme_ids" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Lecturers">
                            <field name="lecturer_ids" nolabel="1" colspan="4" context="{'function':'standard'}">
                                <tree string="Lecturers">
                                    <field name="contact_id"/>
                                    <field name="name"/>
                                    <field name="function"/>
				    <field name="team_id"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Procurements">
                            <field name="purchase_line_ids" nolabel="1" colspan="4" context="{'default_course_id' : active_id}" >
                                <form string="Procurement">
                                    <field name="course_id" invisible="1"/>
                                    <field name="product_id" on_change="on_change_product(product_id)"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <field name="product_price"/>
                                    <separator string="Attachment" colspan="4"/>
                                    <field name="attachment_id"
                                        domain="[('is_support','=', 1),('res_model', '=', 'training.course'),('res_id', '=', course_id)]"
                                        on_change="on_change_attachment(attachment_id)"/>
                                    <field name="attachment_price"/>
                                </form>
                                <tree string="Procurement" editable="bottom">
                                    <field name="course_id" invisible="1"/>
                                    <field name="product_id" on_change="on_change_product(product_id)"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <field name="product_price"/>
                                    <field name="attachment_id"
                                        domain="[('is_support','=', 1),('res_model', '=', 'training.course'),('res_id', '=', course_id)]"
                                        on_change="on_change_attachment(attachment_id)"/>
                                    <field name="attachment_price"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Support of Courses">
                            <field name="attachment_ids" colspan="4" nolabel="1">
                                <tree string="Support of Courses">
                                    <field name="name"/>
                                    <field name="datas_fname"/>
                                    <field name="price"/>
                                </tree>
                            </field>
                            <field name="price"/>
                        </page>
                        <page string="History">
                            <field name="pending_ids" nolabel="1">
                                <tree string="Pendings">
                                    <field name="create_date"/>
                                    <field name="type"/>
                                    <field name="date"/>
                                    <field name="purchase_order_id"/>
                                    <field name="job_id"/>
                                    <field name="reason"/>
                                </tree>
                                <form string="Pending">
                                    <field name="type"/>
                                    <field name="create_date"/>
                                    <field name="date"/>
                                    <field name="purchase_order_id"/>
                                    <field name="job_id"/>
                                    <separator string="Reason" colspan="4"/>
                                    <field name="reason" colspan="4" nolabel="1"/>
                                </form>
                            </field>
                        </page>
                    </notebook>
                    <group colspan="4" col="6">
                        <field name="state_course"/>
                        <button string="Ask Review" type="action" name="%(wizard_course_pending)d" attrs="{'invisible' : [('state_course', '!=', 'validated')]}"/>
                        <button string="Deprecate" type="workflow" name="signal_deprecate" attrs="{'invisible' : [('state_course', '!=', 'validated')]}" 
                            confirm="Do you want to deprecate this course ?"/>
                        <button string="Validate" type="workflow" name="signal_validate" attrs="{'invisible' : [('state_course', '!=', 'pending'),('state_course', '!=', 'draft')]}" 
                            confirm="Do you want to validate this course ?"/>
                        <button string="Reset to Draft" type="object" name="reset_to_draft" attrs="{'invisible' : [('state_course', '!=', 'deprecated')]}"/>
                    </group>
                </form>
            </field>
        </record>

        <act_window
            src_model='training.course'
            res_model='training.course'
            context="{'link_id' : active_id}"
            name="Linked Courses"
            id="course_linked_course"/>

        <act_window
            src_model='training.course'
            res_model='training.offer'
            context="{'course_id' : active_id}"
            name="Offers"
            domain="[]"
            id="course_offer_link"/>

        <act_window
            src_model="training.course"
            res_model="ir.attachment"
            domain="[('res_model', '=', 'training.course'),('res_id', '=', active_id)]"
            name="Attachments"
            id="training_course_attachment"/>

        <act_window
            src_model="training.course"
            res_model="training.seance"
            domain="[('course_id', '=', active_id),('date', '>=', time.strftime('%Y-%m-%d')),('state', 'not in', ('draft', 'closed'))]"
            name="Planned Courses"
            view_mode="tree,calendar,form"
            id="training_course_planned"/>

        <!--
        <act_window
            src_model="training.course"
            res_model="training.course"
            domain="[('p_id', '=', active_id)]"
            name="Sub Courses"
            view_mode="tree,form"
            id="training_course_link_subcourses"/>
        -->

        <record model="ir.ui.view" id="training_course_list">
            <field name="name">training.course.list</field>
            <field name="model">training.course</field>
            <field name="type">tree</field>
            <field name="priority">1</field>
            <field name="arch" type="xml">
                <tree string="Courses" colors=";red:state_course=='draft';red:state_course=='pending';gray:state_course=='deprecated';black:state_course=='validated'">
                    <field name="course_type_id"/>
                    <field name="name" string="Short Name"/>
                    <field name="category_id" string="Product Line"/>
                    <field name="duration" widget="float_time"/>
                    <field name="state_course"/>
                    <field name="has_support"/>
                    <field name="reference_id"/>
                    <field name="reference_lang_id"/>
                    <field name="reference_type"/>
                    <field name="lang_id"/>
                    <field name="kind"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_course_all_act">
            <field name="name">Courses</field>
            <field name="res_model">training.course</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('p_id', '=', False)]</field>
        </record>

        <!--
        <record model="ir.ui.view" id="course_by_reference_tree">
            <field name="name">training.course.by.reference</field>
            <field name="model">training.course</field>
            <field name="type">tree</field>
            <field name="field_parent">child_reference_id</field>
            <field name="arch" type="xml">
                <tree string="Courses">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_course_by_reference_all_act">
            <field name="name">Course Structure (By Master Course)</field>
            <field name="res_model">training.course</field>
            <field name="view_type">tree</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="course_by_reference_tree"/>
            <field name="context">{'master_course' : True}</field>
        </record>
        -->

        <record model="ir.ui.view" id="course_subcourse_tree">
            <field name="name">course.subcourse.tree</field>
            <field name="model">training.course</field>
            <field name="type">tree</field>
            <field name="field_parent">course_ids</field>
            <field name="priority">12</field>
            <field name="arch" type="xml">
                <tree string="Courses">
                    <field name="name"/>
                    <field name="duration"/>
                    <field name="lang_id"/>
                    <field name="state_course"/>
                    <field name="has_support"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_course_subcourse_act">
            <field name="name">Course Structure (By Sub Courses)</field>
            <field name="res_model">training.course</field>
            <field name="view_type">tree</field>
            <field name="view_mode">tree</field>
            <field name="view_id" ref="course_subcourse_tree"/>
            <field name="domain">[('p_id', '=', False)]</field>
        </record>


<!-- training.catalog views & actions -->
        <record model="ir.ui.view" id="training_catalog_form">
            <field name="name">training.catalog.form</field>
            <field name="model">training.catalog</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Catalog">
                    <separator string="Catalog Description" colspan="4"/>
                    <field name="name"/>
                    <field name="year"/>
                    <notebook colspan="4">
                        <page string="Sessions">
                            <field name="session_ids" colspan="4" nolabel="1">
                                <tree string="Sessions">
                                    <field name="name"/>
                                    <field name="date"/>
                                    <field name="state"/>
                                    <field name="offer_id"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Note">
                            <field name="note" nolabel="1"/>
                        </page>
                    </notebook>
                    <group colspan="4" col="6">
                        <field name="state"/>
                        <button name="signal_validate" string="Validate" type="workflow" states="draft"
                            confirm="Do you want to validate this catalog ?"/>
                        <button name="signal_cancel" string="Cancel" type="workflow" states="validated,inprogress"
                            confirm="Do you want to cancel this catalog ?"/>
                        <button name="signal_inprogress" string="In Progress" type="workflow" states="validated"/>
                        <button name="signal_deprecate" string="Deprecate" type="workflow" states="inprogress" 
                            confirm="Do you want to deprecate this catalog ?"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_catalog_tree">
            <field name="name">training.catalog.tree</field>
            <field name="model">training.catalog</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Catalogs">
                    <field name="name"/>
                    <field name="year"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

       <record model="ir.ui.view" id="training_catalog_filter">
            <field name="name">Catalogs Search</field>
            <field name="model">training.catalog</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Catalogs">
                	<filter icon="gtk-apply" string="In Progress" domain="[('state','=', 'inprogress')]"/>
                    <filter icon="terp-camera_test" string="Validated" domain="[('state','=', 'validated')]"/>
                    <separator orientation="vertical"/>
                    <field name="name"/>
                    <newline/>
                    <group expand="0" string="Group By..." >
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Year" icon="terp-go-month" domain="[]" context="{'group_by':'year'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_catalog_all_act">
            <field name="name">Catalogs</field>
            <field name="res_model">training.catalog</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="context">{"search_default_current":1}</field>
        </record>

<!-- training.session views & actions -->
       <record id="training_session_search" model="ir.ui.view">
            <field name="name">training.session.search</field>
            <field name="model">training.session</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Session Search">
                    <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Draft" domain="[('state','=','draft')]" help="Session State Draft."/>
                        <filter icon="terp-check" string="Opened" domain="[('state','=','opened')]" help="Session State Opened."/>
                        <filter icon="terp-camera_test" string="Confirmed" domain="[('state','=','opened_confirmed')]" help="Session State Confirmed."/>
                        <filter icon="terp-dialog-close" string="Closed Subscription" domain="[('state','=','closed_confirmed')]" help="Session State Closed Subscription."/>
                        <filter icon="terp-tools" string="In Progress" domain="[('state','=','inprogress')]" help="Session State In Progress."/>
                        <filter icon="terp-gtk-stop" string="Closed" domain="[('state','=','closed')]" help="Session State Closed."/>
                        <filter icon="terp-dialog-close" string="Cancelled" domain="[('state','=','cancelled')]" help="Session State Cancelled."/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-gtk-select-all" string="Futures" name="futures" domain="[('date', '>=', current_date),('state', '!=', 'closed'),('state', '!=', 'cancelled')]" help="Futures sessions."/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Name"/>
                        <field name="offer_id" string="Offer"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended filters..." groups="base.group_extended" col='15' colspan='4'>
                        <filter icon="terp-personal+" string="Responsible" domain="['|',('user_id', '=', uid)]" help="My responsible sessions." default="1"/>
                        <separator orientation="vertical"/>
                        <field name="catalog_id" string="Catalog"/>
                        <field name="date" string="Date"/>
                        <field name="user_id" string="Responsible"/>
                        <field name="address_id" string="Training place"/>
                        <field name="offer_product_line_id" string="Product Line"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group by..." groups="base.group_extended" col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Offer" name="Offer" domain = "[]" context="{'group_by':'offer_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Catalog" icon="gtk-jump-to" domain="[]" context="{'group_by':'catalog_id'}"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_session_form">
            <field name="name">training.session.form</field>
            <field name="model">training.session</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Session">
                    <field name="id" invisible="1"/>
                    <field name="name"/>
                    <field name="date" on_change="on_change_date(date, offer_id)"/>
                    <notebook colspan="4">
                        <page string="Session Description">
                            <field name="offer_id" domain="[('can_be_planned', '=', 1)]" on_change="on_change_offer(offer_id)"/>
                            <field name="kind" select="1"/>
                            <field name="format_id"/>
                            <field name="catalog_id" groups="training.group_session_user"/>
                            <field name="user_id" groups="training.group_session_user"/>
                            <field name="stylegroup_id" groups="training.group_session_manager" string="Email Style"/>
                            <field name="address_id" select="2"/>
                            <field name="date_end" select="2"/>
                            <newline/>
                            <group colspan="4" col="4" groups="training.group_session_user">
                            <separator string="Subscriptions" colspan="4"/>
                            <field name="confirmed_subscriptions"/>
                            <field name="draft_subscriptions"/>
                            <separator string="Overall seats" colspan="4"/>
                            <group colspan="4" col="4">
                                <group attrs="{'invisible' : [('manual', '=', True)]}">
                                    <field name="participant_count"/>
                                </group>
                                <group attrs="{'invisible' : [('manual', '=', False)]}">
                                    <field name="participant_count_manual"/>
                                </group>
                                <field name="manual"/>
                            </group>
                            <field name="available_seats"/>
                            <field name="has_shared_seances"/>
                            <separator string="Thresholds" colspan="4"/>
                            <field name="min_limit"/>
                            <field name="max_limit"/>
                            </group>
                        </page>
                        <page string="Seances">
                            <field name="seance_ids" colspan="4" nolabel="1"
                                context="{'offer_id' : offer_id, 'date' : date}"
                                attrs="{'readonly' : [('state', '!=', 'draft')]}">
                                <tree string="Seances">
                                    <field name="name"/>
                                    <field name="date"/>
                                    <field name="duration" widget="float_time" sum="Total Duration"/>
                                    <field name="state"/>
                                    <field name="duplicata" groups="training.group_seance_user"/>
                                    <field name="group_id"/>
                                    <field name="shared" groups="training.group_seance_user"/>
                                    <field name="contact_names"/>
                                </tree>
                            </field>
                            <button name="action_create_seances" string="_Create Seances" type="object"
                                icon="gtk-execute" colspan="4" states="draft" groups="training.group_seance_manager"/>
                        </page>
                        <page string="Lecturer Requests" attrs="{'invisible' : [('id', '=', False)]}">
                            <field name="request_ids" nolabel="1" colspan="4"
                                context="{'default_session_id': id}">
                                <form string="Lecturer Requests">
                                    <field name="session_id" invisible="1"/>
                                    <field name="job_id" on_change="on_change_job(job_id)" domain="[('name', '!=', False)]" 
                                        context="{'offer_id': parent.offer_id, 'function': parent.kind}"/>
                                    <field name="email"/>
                                    <field name="participation_ids"
                                           nolabel="1"
                                           colspan="4"
                                           context="{'default_job_id': job_id, 'default_request_session_id': session_id}"
                                           attrs="{'readonly': [('job_id', '=', False)]}" 
                                  />
                                    <separator colspan="4"/>
                                    <field name="state"/>
                                </form>
                                <tree string="Lecturer Requests">
                                    <field name="job_id"/>
                                    <field name="email" groups="training.group_training"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Groups">
                            <field name="group_ids" colspan="4" nolabel='1'>
                                <tree string='Groups'>
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <group colspan="4" col="3">
                        <field name="state"/>
                        <group col="6" groups="training.group_session_manager">
                            <button name="signal_open" string="Open" type="workflow" states="draft" confirm="Do you want to open this session ?"/>
                            <button name="signal_open_confirm" string="Confirm" type="workflow" states="opened" confirm="Do you want to confirm this session ?"/>
                            <button name="signal_close_confirm" string="Close Subscriptions" type="workflow" states="opened_confirmed" confirm="Do you want to close the subscription for this session ?"/>
                            <button name="signal_inprogress" string="Start" type="workflow" states="closed_confirmed" confirm="Do you want to close this session for the subscription ?"/>
                            <button name="signal_close" string="Close" type="workflow" states="inprogress"  confirm="Do you want to close this session ?"/>
                            <button name="signal_cancel" string="Cancel" type="workflow" states="draft,opened,opened_confirmed,closed_confirmed" confirm="Do you want to cancel this session ?"/>
                        </group>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_session_tree">
            <field name="name">training.session.tree</field>
            <field name="model">training.session</field>
            <field name="type">tree</field>
            <field name="priority">0</field>
            <field name="arch" type="xml">
                <tree string="Sessions" colors="red:state=='draft';gray:state=='cancelled'">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="date"/>
                    <field name="offer_id"/>
                    <field name="catalog_id"/>
                    <field name="kind"/>
                    <field name="format_id"/>
                    <field name="available_seats" groups="training.group_seance_user"/>
                    <field name="participant_count" groups="training.group_seance_user"/>
                    <field name="draft_subscriptions" groups="training.group_seance_user"/>
                    <field name="confirmed_subscriptions" groups="training.group_seance_user"/>
                    <field name="offer_product_line_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="training_session_calendar">
            <field name="name">training.session.calendar</field>
            <field name="model">training.session</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar string="Session" color="kind" date_start="date">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="kind"/>
                    <field name="offer_id"/>
                </calendar>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_session_future_all_act">
            <field name="name">Sessions</field>
            <field name="res_model">training.session</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
<!--            <field name="context">{"search_default_futures":1}</field>-->
        </record>

        <record model="ir.actions.act_window" id="training_session_planning_act">
            <field name="name">Calendar of Sessions</field>
            <field name="res_model">training.session</field>
            <field name="view_type">form</field>
            <field name="view_mode">calendar,tree,form</field>
        </record>

        <act_window
            name="All Subscriptions"
            id="training_session_all_participants_act"
            context="{'default_partner_id':False}"
            src_model="training.session"
            domain="[('session_id', '=', active_id),('subscription_id.state', '!=', 'draft')]"
            res_model="training.subscription.line"/>

        <act_window
            name="Subscriptions To Confirm"
            id="training_session_draft_participants_act"
            src_model="training.session"
            domain="[('session_id', '=', active_id),('state', '=', 'draft'),('subscription_id.state', '=', 'confirmed')]"
            res_model="training.subscription.line"/>

        <act_window
            name="Lecturer Requests"
            id="session_participation_requests"
            src_model="training.session"
            res_model="training.participation.stakeholder.request"
            domain="[('session_id', '=', active_id)]"/>

        <act_window
            name="Seances"
            id="training_session_seances_act"
            src_model="training.session"
            res_model="training.seance"
            domain="[('session_ids', '=', [active_id])]"
            view_mode="tree,calendar,form"/>


<!-- training.seance.generate.zip.wizard -->
        <record model="ir.ui.view" id="seance_generate_zip_wizard_form">
            <field name="name">training.seance.genereate.zip.wizard.form</field>
            <field name="model">training.seance.generate.zip.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Generate Reports" col="4">
                    <group colspan="4" col="2" states="selection" >
                        <separator string="Reports" colspan="2"/>
                        <field name="presence_list_report"/>
                        <field name="remuneration_form_report"/>
                    </group>
                    <group colspan="4" states="result">
                        <field name="zip_file_name"/>
                        <newline/>
                        <field name="zip_file" filename="zip_file_name"/>
                    </group>
                    <separator string="" colspan="4"/>
                    <group colspan="4" col="5">
                        <field name="state" invisible="1"/>
                        <button string="Cancel" type="object" special="cancel" name="action_close" states="selection"/>
                        <button string="Close" type="object" special="cancel" name="action_close" states="result"/>
                        <button string="Generate Reports" type="object" name="action_generate_zip" states="selection"/>
                    </group>
                </form>
            </field>
        </record>
      

        <record model="ir.actions.act_window" id="seance_generate_zip_wizard_act">
            <field name="name">Generate Reports</field>
            <field name="res_model">training.seance.generate.zip.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>
      

<!-- training.seance -->
       <record model="ir.ui.view" id="training_seance_search">
            <field name="name">training.seance.search</field>
            <field name="model">training.seance</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Seance Search">
                    <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Opened" domain="[('state','=','opened')]" help="Seance in state Opened."/>
                        <filter icon="terp-camera_test" string="Confirmed" domain="[('state','=','confirmed')]" help="Seance in state Confirmed."/>
                        <filter icon="terp-mail-forward" string="In Progress" domain="[('state','=','inprogress')]" help="Seance in state In Progress."/>
                        <filter icon="terp-dialog-close" string="Closed" domain="[('state','=','closed')]" help="Seance in state Closed."/>
                        <filter icon="terp-gtk-stop" string="Cancelled" domain="[('state','=','cancelled')]" help="Seance in state Cancelled."/>
                        <filter icon="terp-check" string="Done" domain="[('state','=','done')]" help="Seance in state Done."/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-gtk-select-all" string="Future" name="future" domain="[('date', '>=', current_date),('state', '!=', 'closed'),('state', '!=', 'cancelled')]" help="Seance in state draft."/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Name"/>
                        <field name="original_offer_id" string="Offer"/>
                        <field name="session_ids" string="Session"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Group" icon="terp-gtk-jump-to-rtl" domain="[]" context="{'group_by':'group_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended filters..." groups="base.group_extended" col='15' colspan='4'>
                        <field name="date" string="Date"/>
                        <field name="duration" string="Duration"/>
                        <field name="state" string="State"/>
                        <newline/>
                        <field name="course_id" string="Course"/>
                        <field name="user_id" string="Responsible"/>
                        <field name="confirmed_lecturer" string="Confirmed Lecturer"/>
                        <field name="kind" string="Kind"/>
                        <field name="is_first_seance" string="First Seance"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_seance_form">
            <field name="name">training.seance.form</field>
            <field name="model">training.seance</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Seance">
                    <field name="name"/>
                    <field name="date" on_change="on_change_date(date)"/>
                    <field name="kind"/>
                    <field name="group_id" groups="base.group_user"/>
                    <field name="duplicata" invisible="1"/>
                    <field name="duration" widget="float_time"/>
                    <notebook colspan="4">
                        <page string="Seance Description">
                            <separator string="Course Information" colspan="4"/>
                            <field name="course_id" on_change="on_change_course(course_id, kind)" attrs="{'readonly' : [('state', '!=', 'opened')]} "/>
                            <field name="state_course" groups="training.group_seance_manager"/>
                            <group col="4" colspan="4" groups="training.group_seance_user">
                                <separator string="Seats" colspan="4"/>
                                <field name="available_seats" groups="training.group_seance_manager"/>
                                <field name="draft_seats" groups="training.group_seance_manager"/>
                                <group colspan="4" col="4">
                                    <group attrs="{'invisible' : [('manual', '=', True)]}">
                                        <field name="participant_count"/>
                                    </group>
                                    <group attrs="{'invisible' : [('manual', '=', False)]}">
                                        <field name="participant_count_manual"/>
                                    </group>
                                    <field name="manual"/>
                                </group>
                                <separator string="Thresholds" colspan="4"/>
                                <field name="min_limit"/>
                                <field name="max_limit"/>
                                <separator string="Responsible" colspan="4"/>
                                <field name="user_id"/>
                            </group>
                        </page>
                        <page string="Linked Sessions" groups="training.group_seance_user">
                            <!--
                            <separator string="Origin" colspan="4"/>
                            <field name="original_session_id"/>
                            <field name="original_offer_id"/>
                            -->
                            <separator string="Linked Sessions" colspan="4"/>
                            <field name="session_ids"
                                colspan="4"
                                nolabel="1"
                                domain="[('state', '=', 'draft'),('offer_id.course_ids', '=', [course_id])]"
                                attrs="{'readonly' : ['|',('state', '!=', 'opened'),('course_id', '=', False)]}"  groups="base.group_user">
                                <tree string="Linked Sessions">
                                    <field name="name"/>
                                    <field name="state"/>
                                    <field name="offer_id"/>
                                    <field name="catalog_id"/>
                                    <field name="kind"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Lecturers" groups="training.group_seance_manager,training.group_seance_user">
                            <field name="forced_lecturer"/>
                            <field name="contact_ids" nolabel="1" colspan="4" string="Lecturers">
                                <tree string="Lecturers">
                                    <field name="request_id"/>
                                    <field name="job_id"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Participants">
                            <field name="presence_form" groups="training.group_seance_user"/>
                            <field name="participant_ids" colspan="4" nolabel="1"
                                context="{'default_seance_id' : active_id}">

                                <tree string="Participants" editable="bottom">
                                    <field name="partner_id"/>
                                    <field name="contact_lastname"/>
                                    <field name="contact_firstname"/>
                                    <field name="present"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Procurements" groups="training.group_seance_user">
                            <field name="purchase_line_ids" nolabel="1" colspan="4" attrs="{'readonly' : [('state', '!=', 'opened')]}">
                                <form string="Procurement">
                                    <field name="auto_update"/>
                                    <separator string="Automatic Declaration" colspan="4"/>
                                    <field name="course_id" colspan="4"/>
                                    <field name="product_id" on_change="on_change_product(product_id)" colspan="4"/>
                                    <field name="product_qty" on_change="on_change_product_qty(product_qty, fix, parent.manual, parent.participant_count_manual, parent.participant_count)"/>
                                    <field name="product_uom"/>
                                    <separator string="Manual Description" colspan="4"/>
                                    <field name="description" colspan="4"/>
                                    <field name="product_price"/>
                                    <field name="fix"/>
                                    <field name="attachment_id" domain="[('is_support', '=', 1),('res_model', '=', 'training.course'),('res_id', '=', parent.course_id)]"/>
                                    <field name="proc_qty"/>
                                    <field name="procurement_id" invisible="1"/>
                                </form>
                                <tree string="Procurements" editable="bottom">
                                    <field name="course_id"/>
                                    <field name="product_id" on_change="on_change_product(product_id)"/>
                                    <field name="description"/>
                                    <field name="product_qty" on_change="on_change_product_qty(product_qty, fix, parent.manual, parent.participant_count_manual, parent.participant_count)"/>
                                    <field name="product_uom"/>
                                    <field name="product_price"/>
                                    <field name="fix"/>
                                    <field name="attachment_id" domain="[('is_support', '=', 1),('res_model', '=', 'training.course'),('res_id', '=', parent.course_id)]"/>
                                    <field name="proc_qty"/>
                                    <field name="procurement_id" invisible="1"/>
                                    <field name="auto_update"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                    <group colspan="4" col="3">
                        <field name="state"/>
                        <group col="5" groups="training.group_seance_manager">
                        <button name="seance_confirm" string="Confirm" type="workflow" states="opened" confirm="Do you want to confirm this seance (procurements, ...) ?"/>
                        <button name="signal_inprogress" string="Start" type="workflow" states="confirmed" confirm="Do you want to start this seance ?"/>
                        <button name="signal_close" string="Close" type="workflow" states="inprogress" confirm="Do you want to close this seance ?"/>
                        <button name="signal_cancel" string="Cancel" type="workflow" states="opened,confirmed"  confirm="Do you want to cancel this seance ?"/>
                        <button name="signal_seance_done" string="Done" type="workflow" states="closed"/>
                        </group>
                    </group>
                    <button name="%(seance_generate_zip_wizard_act)d" type="action" string="Generate Reports" colspan="4" groups="training.group_training"/>
                </form>
            </field>
        </record>

        <act_window
            src_model="training.seance"
            res_model="ir.attachment"
            domain="[('res_id', '=', active_id)]"
            name="Attachments"
            groups="base.group_user"
            id="training_seance_attachment"/>

        <act_window
            name="Lecturer Participations"
            groups="base.group_user"
            id="seance_participation_stakeholders"
            src_model="training.seance"
            res_model="training.participation.stakeholder"
            domain="[('seance_id', '=', active_id)]"/>

        <act_window
            name="Participants"
            id="seance_participations"
            src_model="training.seance"
            res_model="training.participation"
            groups="base.group_user"
            domain="[('seance_id', '=', active_id)]"/>

        <act_window
            name="Linked Sessions"
            id="seance_sessions"
            src_model="training.seance"
            res_model="training.session"
            groups="base.group_user"
            domain="[('seance_ids', 'in', [active_id])]"/>

        <act_window
            name="Purchase Orders"
            id="seance_purchase_orders_rel"
            src_model="training.seance"
            res_model="purchase.order"
            groups="base.group_user"
            domain="[('seance_id','=',active_id)]"/>

        <record model="ir.ui.view" id="training_seance_tree">
            <field name="name">training.seance.tree</field>
            <field name="model">training.seance</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Seances"  colors="blue:state=='opened';darkgreen:state=='confirmed';darkgreen:state=='inprogress';gray:state=='cancelled'">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="date"/>
                    <field name="duration" widget="float_time"/>
                    <field name="original_offer_id"/>
		            <field name="original_offer_kind"/>
                    <field name="state_course"/>
                    <field name="group_id"/>
                    <field name="participant_count"/>
                    <field name="available_seats"/>
                    <field name="draft_seats"/>
                    <field name="confirmed_lecturer"/>
                    <field name="contact_names"/>
                    <field name="presence_form"/>
                    <field name="is_first_seance"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="training_seance_calendar">
            <field name="name">training.seance.calendar</field>
            <field name="model">training.seance</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar string="Seances" date_start="date" color="kind">
                    <field name="name"/>
                    <field name="group_id"/>
                    <field name="date"/>
                    <field name="duration" widget="float_time"/>
                    <field name="state"/>
                </calendar>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_seance_future_all_act">
            <field name="name">Seances</field>
            <field name="res_model">training.seance</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <!--<field name="context">{"search_default_future":1}</field>-->
        </record>

        <record model="ir.actions.act_window" id="training_seance_planning_act">
            <field name="name">Calendar of Seances</field>
            <field name="res_model">training.seance</field>
            <field name="view_type">form</field>
            <field name="view_mode">calendar</field>
        </record>


<!-- training.seance.purchase_line -->
       <record id="training_seance_purchase_line_search" model="ir.ui.view">
            <field name="name">training.seance.purchase_line.search</field>
            <field name="model">training.seance.purchase_line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Seance Purchase Line Search">
                    <group col='15' colspan='4'>
                        <filter icon="terp-gtk-select-all" string="Futures Purchases" name="purchase" domain="[('seance_date', '&gt;=', time.strftime('%%Y-%%m-%%d 00:00:00'))]" help="Suscriptions in which I create." default="1"/>
                        <separator orientation="vertical"/>
                        <field name="seance_id" string="Seance"/>
                        <field name="seance_date" string="Seance Date"/>
                        <field name="course_id" string="For Course"/>
                        <field name="product_id" string="Product"/>
                        <field name="description" string="Description"/>
                    </group>
                </search>
            </field>
        </record>

        <record model="ir.ui.view" id="sceance_purchase_line_tree">
            <field name="name">training.seance.purchase_line.tree</field>
            <field name="model">training.seance.purchase_line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Seance Procurements">
                    <field name="seance_id"/>
                    <field name="seance_date"/>
                    <field name="product_id"/>
                    <field name="description"/>
                    <field name="product_qty"/>
                    <field name="product_uom"/>
                    <field name="product_price"/>
                    <field name="fix"/>
                    <field name="attachment_id"/>
                    <field name="proc_qty"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_seance_purchase_line_act">
            <field name="name">Seances Procurements</field>
            <field name="res_model">training.seance.purchase_line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
<!--            <field name="context">{"search_default_purchase":1}</field>-->
        </record>


<!-- training.subscription -->
       <record id="training_subscription_filter" model="ir.ui.view">
            <field name="name">training.subscription.search</field>
            <field name="model">training.subscription</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Subscription">
                   <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="To Validate" domain="[('state','=','draft')]" help="Subscription State Draft."/>
                        <filter icon="terp-check" string="To Invoice" domain="[('state','=','confirmed')]" help="Subscription State Confirmed."/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-personal+" string="My Subscriptions" domain="['|',('create_uid', '=', uid)]" help="Suscriptions in which I create." default="1"/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Reference"/>
                        <field name="partner_id" string="Partner"/>
                   </group>
                   <newline/>
                   <group expand="0" string="Extended Filters...">     
                        <field name="address_id" string="Invoice Address"/>
                        <field name="subscription_line_ids" string="Subscription Lines"/>
                        <field name="responsible_id" string="Creator"/>
                   </group>
                   <newline/>
                   <group expand="0" string="Group By...">                      
                        <filter string="Partner" name="Partner" icon="terp-partner" domain = "[]" context="{'group_by':'partner_id'}"/>
                        <filter string="Responsible" icon="terp-personal" domain="[]" context="{'group_by':'responsible_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Create Date" icon="terp-go-month" domain="[]" context="{'group_by':'create_date'}"/>
                   </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_subscription_form">
            <field name="name">training.subscription.form</field>
            <field name="model">training.subscription</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="subscription">
                    <separator string="Subscription Description" colspan="4"/>
                    <field name="name"/>
                    <field name="create_date"/>
                    <notebook colspan="4">
                        <page string="Subscription">
                            <field name="partner_id" on_change="on_change_partner(partner_id)" attrs="{'readonly' : [('state', '!=', 'draft')]}" groups="base.group_user"/>
                            <field name="pricelist_id" invisible="1"/>
                            <field name="partner_rh_email"/>
                            <field name="address_id" domain="[('partner_id','=', partner_id)]" attrs="{'readonly' : [('state', '!=', 'draft')]}" groups="base.group_user"/>
                            <group colspan="2" col="4" groups="base.group_user">
                                <field name="notification_active" attrs="{'readonly' : [('state', '!=', 'draft')]}"/>
                                <field name="notification_text"/>
                            </group>
                            <field name="payment_term_id" attrs="{'readonly' : [('state', '!=', 'draft')]}" groups="base.group_user"/>
                            <field name="subscription_line_ids" colspan="4" nolabel="1"
                                default_get="{'price_list_id': pricelist_id, 'partner_hr_email': partner_rh_email}"
                                context="{'default_price_list_id': pricelist_id, 'default_partner_hr_email': partner_rh_email}"
                                attrs="{'readonly' : [('state', '!=', 'draft')]}">
                                <form string="Subscription Line">
                                    <separator string="General" colspan="4"/>
                                    <field name="name"/>
                                    <field name="partner_hr_email" readonly="1"/>
                                    <field name="job_id"
                                        context="{'partner_id' : parent.partner_id}"
                                        domain="[('name', '=', parent.partner_id)]"
                                        on_change="on_change_job(job_id)"/>
                                    <field name="job_email"/>

                                    <separator string="Session" colspan="4"/>
                                    <field name="session_id"
                                        on_change="on_change_session(session_id, price_list_id, parent.partner_id)"/>
                                    <field name="session_date"/>
                                    <field name="kind"/>

                                    <group colspan="4" col="4" groups="base.group_user">
                                        <separator string="Invoicing" colspan="4"/>
                                    </group>
                                    <field name="price_list_id" on_change="on_change_price_list(session_id, price_list_id)" groups="base.group_user"/>
                                    <field name="price" groups="base.group_user"/>
                                    <group col="5" colspan="4" string="Invoice" groups="base.group_user">
                                        <field name="invoice_id" context="{'form_view_ref': 'account.invoice_form'}"/>
                                        <field name="invoice_line_id"/>
                                        <group col="1" colspan="1">
                                            <group attrs="{'invisible' : [('invoice_line_id', '=', False)]}" col="2" colspan="1">
                                                <field name="paid"/>
                                            </group>
                                            <group states="confirmed,done">
                                                <button name="action_create_invoice" string="Create Invoice" type="object" attrs="{'invisible': [('invoice_line_id', '!=', False)]}" icon="gtk-new"/>
                                            </group>
                                        </group>
                                    </group>
                                    <separator colspan="4"/>
                                    <field name="state" colspan="4"/>
                                </form>
                                <tree string="Subscription Lines">
                                    <field name="name"/>
                                    <field name="session_id"/>
                                    <field name="session_date"/>
                                    <field name="kind"/>
                                    <field name="job_id" domain="[('name', '=', parent.partner_id)]" on_change="on_change_job(job_id)"/>
                                    <field name="price_list_id" groups="base.group_user"/>
                                    <field name="price" sum="Price"/>
                                    <field name="invoice_line_id" widget="boolean" string="Invoiced" groups="base.group_user"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Other Data" groups="base.group_user">
                            <field name="responsible_id"/>
                            <field name="origin" attrs="{'readonly' : [('state', '!=', 'draft')]}"/>
                            <field name="is_from_web" groups="base.group_user"/>
                        </page>
                    </notebook>
                    <group colspan="4" col="6">
                        <field name="state"/>
                        <button string="Confirm Request" type="workflow" name="signal_confirm" states="draft" confirm="Do you want to confirm the request for this subscription ?" icon="terp-camera_test"/>
                        <button string="Cancel" type="workflow" name="signal_cancel" states="draft" confirm="Do you want to cancel this subscription ?" icon="gtk-cancel"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_subscription_tree">
            <field name="name">training.subscription.tree</field>
            <field name="model">training.subscription</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Subscriptions" colors="black:state == 'done';red:state=='draft';darkgreen:state=='confirmed';gray:state=='cancelled'">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="create_date"/>
                    <field name="partner_id" groups="base.group_user"/>
                    <field name="responsible_id" groups="base.group_user"/>
                    <field name="partner_rh_email"/>
                    <field name="payment_term_id" groups="base.group_user"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_subscription_all_act">
            <field name="name">Subscriptions</field>
            <field name="context">{'default_partner_id':False}</field>
            <field name="res_model">training.subscription</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <record model="ir.actions.act_window" id="training_subscription_new_act">
            <field name="name">New Subscription</field>
            <field name="context">{'default_partner_id':False, 'default_address_id': False}</field>
            <field name="res_model">training.subscription</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
        </record>

        <act_window name="Subscription Lines To Confirm"
            groups='base.group_user'
            src_model="training.subscription"
            res_model="training.subscription.line"
            domain="[('subscription_id', '=', active_id),('state', '=', 'draft'), ('subscription_state', '=', 'confirmed')]"
            id="act_window_subscription_line_to_confirm"/>

        <act_window name="All Subscription Lines"
            groups='base.group_user'
            src_model="training.subscription"
            res_model="training.subscription.line"
            domain="[('subscription_id', '=', active_id)]"
            id="act_window_subscription_line_related"/>

        <act_window name="Sessions"
            groups='base.group_user'
            src_model="training.subscription"
            res_model="training.session"
            context="{'subscription_id' : active_id}"
            id="act_window_session_from_subscription"/>


<!-- training.subscription.cancellation.wizard -->
        <record model="ir.ui.view" id="subscription_cancellation_wizard_form">
            <field name="name">training.subscription.cancellation.wizard</field>
            <field name="model">training.subscription.cancellation.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Subscription Cancellation Wizard" col="4">
                    <group attrs="{'readonly' : [('state', '!=', 'init')], 'invisible' : [('state', '=', 'end')]}" colspan="4">
                        <separator string="Subscription" colspan="4"/>
                        <field name="subscription_id"/>
                        <field name="subscription_line_id" on_change="on_change_subscription_line(subscription_line_id)"/>
                        <separator string="Session" colspan="4"/>
                        <field name="session_id"/>
                        <field name="session_date"/>
                        <field name="session_state"/>
                        <separator string="Participant" colspan="4"/>
                        <field name="partner_id"/>
                        <field name="participant_id"/>
                    </group>
                    <group states="replacement" colspan="4">
                        <separator string="New Participant" colspan="4"/>
                        <field name="new_participant_id" 
                            on_change="on_change_new_participant(new_participant_id)" 
                            context="{'partner_id' : partner_id}"
                            attrs="{'required' : [('state', '=', 'replacement')]}"/>
                        <field name="new_participant_email"/>
                    </group>
                    <group states="postponement" colspan="4">
                        <separator string="New Session" colspan="4"/>
                        <field name="session_offer_id" invisible="1"/>
                        <field name="new_session_id"
                            on_change="on_change_new_session(new_session_id)"
                            attrs="{'required' : [('state', '=', 'postponement')]}"/>
                        <field name="new_session_date"/>
                    </group>
                    <group states="cancellation" colspan="4">
                        <separator string="Reason" colspan="4"/>
                        <field name="cancellation_reason" colspan="4" nolabel="1"
                            attrs="{'required' : [('state', '=', 'cancellation')]}"/>
                        <separator string="Medical Certificate" colspan="4"/>
                        <field name="cancellation_medical_certificate_toggle"/>
                        <field name="cancellation_medical_certificate_name" invisible="1"/>
                        <field name="cancellation_medical_certificate" 
                            filename="cancellation_medical_certificate_name" 
                            attrs="{'readonly' : [('cancellation_medical_certificate_toogle', '=', False)]}"/>
                    </group>
                    <group states="end" colspan="4">
                        <label string="The operation has been done with success !" colspan="4"/>
                        <separator string="" colspan="4"/>
                        <button name="action_done" string="Done" type="object" states="end"/>
                    </group>
                    <group col="7" colspan="4" attrs="{'invisible' : [('state', '=', 'end')]}">
                        <separator string="" colspan="7"/>
                        <field name="state" invisible="1"/>
                        <button name="action_cancel" string="Cancel" type="object" special="cancel" icon="gtk-cancel" states="init,replacement,postponement,cancellation"/>
                        <label string=""/>
                        <button name="action_cancellation" string="Cancellation" type="object" states="init"/>
                        <button name="action_replacement" string="Replacement" type="object" states="init"/>
                        <button name="action_postponement" string="Postponement" type="object" states="init"/> 
                        <label string=""/>
                        <button name="action_apply" string="Apply" type="object" states="cancellation,replacement,postponement" icon="gtk-apply"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="subscription_cancellation_wizard_act">
            <field name="name">Subscription Cancellation Wizard</field>
            <field name="res_model">training.subscription.cancellation.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>


<!-- training.subscription.line -->
<!--        <record model="ir.actions.act_window" id="training_subscription_line_all_act">-->
<!--            <field name="name">Subscription Lines</field>-->
<!--            <field name="res_model">training.subscription.line</field>-->
<!--            <field name="view_type">form</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--            <field name="view_id" ref="training_subscription_line_tree2" />-->
<!--            <field name="domain"></field>-->
<!--        </record>-->

<!--        <record model="ir.actions.act_window" id="training_subscription_line_uninvoiced_act">-->
<!--            <field name="name">All Subscription Lines to Invoice</field>-->
<!--            <field name="res_model">training.subscription.line</field>-->
<!--            <field name="view_type">form</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--            <field name="view_id" ref="training_subscription_line_tree" />-->
<!--            <field name="domain">[('invoice_line_id', '=', False),('state', 'in', ('done','confirmed')),('subscription_id.state', 'in', ('confirmed', 'done')), ('session_id.state', 'not in', ['cancelled', 'draft']),('price','!=',0)]</field>-->
<!--        </record>-->

<!--        <record model="ir.actions.act_window" id="training_subl_uninvoiced_to_fix_act">-->
<!--            <field name="name">Subscription Lines to Invoice To Fix</field>-->
<!--            <field name="res_model">training.subscription.line</field>-->
<!--            <field name="view_type">form</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--            <field name="view_id" ref="training_subscription_line_tree" />-->
<!--            <field name="domain">[('invoice_line_id', '=', False),('state', 'in', ('done','confirmed')),('subscription_id.state', 'in', ('confirmed', 'done')), ('session_id.date', '&lt;', (datetime.datetime.today()+datetime.timedelta(days=1)).strftime('%Y-%m-%d 23:59:59')),('session_id.state','in',['inprogress','closed']),('price','!=',0)]</field>-->
<!--        </record>-->

<!--        <record model="ir.actions.act_window" id="training_subscription_line_draft_act">-->
<!--            <field name="name">Subscription Lines to Validate</field>-->
<!--            <field name="res_model">training.subscription.line</field>-->
<!--            <field name="view_type">form</field>-->
<!--            <field name="view_mode">tree,form</field>-->
<!--            <field name="view_id" ref="training_subscription_line_tree" />-->
<!--            <field name="domain">[('state', '=', 'draft'), ('subscription_id.state', '=', 'confirmed')]</field>-->
<!--        </record>-->

       <record id="training_subscription_line_search" model="ir.ui.view">
            <field name="name">training.subscription.line.search</field>
            <field name="model">training.subscription.line</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Subscription Line">
                    <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Draft" domain="[('state', '=', 'draft')]" help="Subscription lines in draft state."/>
                        <filter icon="terp-camera_test" string="Confirmed" domain="[('state', '=', 'confirmed')]" help="Subscription lines in confirmed state."/>
                        <separator orientation="vertical"/>
                        <filter icon="terp-camera_test" string="To Validate" domain="[('state', '=', 'draft'), ('subscription_id.state', '=', 'confirmed')]" help="Subscription Line State To Validate."/>
                        <filter icon="terp-check" string="To Invoice" domain="[('invoice_line_id', '=', False),('state', 'in', ('done','confirmed')),('subscription_id.state', 'in', ('confirmed', 'done')), ('session_id.state', 'not in', ['cancelled', 'draft']),('price','!=',0)]" help="Subscription Line State To Invoice."/>
                        <filter icon="terp-emblem-important" string="To Fix" domain="[('session_id.date', '&lt;', (datetime.datetime.today()+datetime.timedelta(days=1)).strftime('%%Y-%%m-%%d 23:59:59')),('session_id.state','in',['inprogress','closed'])]" help="Subscription Line State To Fix."/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Reference"/>
                        <field name="partner_id" string="Partner"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended Filters...">
                        <field name="create_uid" string="Created by"/>
                        <field name="subscription_state" string="State"/>
                        <field name="offer_id" string="Offer"/>
                        <field name="offer_product_line_id" string="Product Line"/>
                        <field name="job_id" string="Participant"/>
                        <field name="contact_id" string="Contact"/>
                        <field name="kind" string="Kind"/>
                        <newline/>
                        <field name="validation_uid" string="Validated by"/>
                        <field name="cancellation_uid" string="Cancelled by"/>
                        <field name="session_state" string="Session State"/>
                        <field name="session_date" string="Session Date"/>
                        <field name="has_certificate" string="Has Certificate"/>
                    </group>
                    <newline/>
                    <group expand="0" string="Group By...">
                        <filter string="Partner" icon="terp-partner" domain="[]" context="{'group_by':'session_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]" context="{'group_by':'state'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Create Date" icon="terp-go-month" domain="[]" context="{'group_by':'create_date'}"/>
                    </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_subscription_line_form">
            <field name="name">training.subscription.line.form</field>
            <field name="model">training.subscription.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Subscription Line">
                    <field name="name"/>
                    <field name="subscription_id" on_change="on_change_subscription(subscription_id)" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                    <field name="partner_id"/>
                    <field name="partner_hr_email" readonly="1"/>
                    <field name="job_id" context="{'partner_id': partner_id}" domain="[('name', '=', partner_id)]" on_change="on_change_job(job_id)" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                    <field name="job_email" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                    <notebook colspan="4">
                        <page string="General">
                            <separator string="Session" colspan="4"/>
                            <field name="session_id" on_change="on_change_session(session_id, price_list_id, partner_id)" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                            <field name="kind"/>
                            <separator string="Invoicing" colspan="4"/>
                            <group groups="training.group_training" colspan="2" col="2">
                                <field name="price_list_id" on_change="on_change_price_list(session_id, price_list_id)" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                            </group>
                            <field name="price" attrs="{'readonly':[('state', '!=', 'draft')]}"/>
                            <group col="5" colspan="4" groups="training.group_training">
                                <field name="invoice_id" context="{'form_view_ref': 'account.invoice_form'}"/>
                                <field name="invoice_line_id"/>
                                <group col="1" colspan="1">
                                    <group attrs="{'invisible' : [('invoice_line_id', '=', False)]}" col="2" colspan="1">
                                        <field name="paid"/>
                                    </group>
                                    <group states="confirmed,done" groups="training.group_training">
                                        <button name="action_create_invoice" string="Create Invoice" type="object" icon="gtk-new" attrs="{'invisible': [('invoice_line_id', '!=', False)]}"/>
                                    </group>
                                </group>
                            </group>
                            <group colspan="4" groups="training.group_training">
                                <separator string="Internal Note" colspan="4"/>
                                <field name="internal_note" colspan="4" nolabel="1"/>
                            </group>
                        </page>
                        <page string="History" groups="training.group_subscription_manager">
                            <field name="create_uid"/>
                            <field name="create_date"/>
                            <field name="validation_uid"/>
                            <field name="validation_date"/>
                            <field name="cancellation_uid"/>
                            <field name="cancellation_date"/>
                            <group attrs="{'invisible':[('state', '!=', 'cancelled')]}" colspan="4" col="4">
                                <separator string="Reason of Cancellation" colspan="4"/>
                                <field name="has_certificate"/>
                                <field name="reason_cancellation" nolabel="1" colspan="4"/>
                            </group>
                        </page>
                        <page string="Email" groups="training.group_subscription_manager">
                            <separator string="Email Notifcation Extra Text"/>
                            <field name="email_note" nolabel="1" colspan="4"/>
                        </page>
                    </notebook>
                    <separator colspan="4"/>
                    <group col="9" colspan="4">
                        <field name="state"/>
                        <button name="signal_confirm" string="Confirm" type="workflow" states="draft" confirm="Do you want to confirm this subscription line ?" icon="terp-camera_test"/>
                        <button name="signal_cancel" string="Cancel" type="workflow" states="draft" confirm="Do you want to cancel this subscription line ?" icon="gtk-cancel"/>
                        <button name="signal_invoice_and_send_emails" string="Cancel (Penalities)" type="workflow" states="confirmed" confirm="Do you want to cancel this subscription line ?" icon="gtk-cancel"/>
                        <button name="%(training.subscription_cancellation_wizard_act)d" string="Cancel (Free)" type="action" groups="training.group_subscription_manager" states="confirmed" context="{'default_state':'cancellation'}" confirm="Do you want to cancel this subscription line ?" icon="gtk-cancel"/>
                        <button name="%(training.subscription_cancellation_wizard_act)d" string="Replacement" type="action" states="confirmed" groups="training.group_subscription_manager" context="{'default_state':'replacement'}" confirm="Do you want to do a replacement for this subscription line ?" icon="terp-stock_effects-object-colorize"/>
                        <button name="%(training.subscription_cancellation_wizard_act)d" string="Postponement" type="action" states="confirmed" groups="training.group_subscription_manager" context="{'default_state':'postponement'}" confirm="Do you want to postpone this subscription line ?" icon="terp-stock_effects-object-colorize"/>
                        <button name="signal_done" string="Done" type="workflow" states="confirmed" icon="terp-camera_test"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_subscription_line_tree">
            <field name="name">training.subscription.line.tree</field>
            <field name="model">training.subscription.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Subscription Lines" colors="black:state == 'done';red:state=='draft';darkgreen:state=='confirmed';gray:state=='cancelled'">
                    <field name="name"/>
                    <field name="state"/>
                    <field name="session_id"/>
                    <field name="session_state"/>
                    <field name="session_date"/>
                    <field name="kind"/>
                    <field name="partner_id" groups="base.group_user"/>
                    <field name="price_list_id" groups="base.group_user"/>
                    <field name="partner_hr_email" groups="base.group_user"/>
                    <!--<field name="job_id" string="Participant"/>-->
                    <field name="contact_lastname"/>
                    <field name="contact_firstname"/>
                    <field name="job_email"/>
                    <field name="notification_text" groups="base.group_user"/>
                    <field name="price"/>
                    <field name="max_limit" groups="base.group_user"/>
                    <field name="confirmed_subscriptions" groups="base.group_user"/>
                    <field name="available_seats" groups="base.group_user"/>
                    <field name="draft_subscriptions" groups="base.group_user"/>
                    <field name="theoritical_disponibility" groups="base.group_user"/>
                    <field name="create_date" select="2" groups="base.group_user"/>
                    <field name="validation_date" select="2" groups="base.group_user"/>
                    <field name="invoice_line_id" groups="base.group_user"/>
                    <field name="has_certificate" groups="base.group_user"/>
                    <field name="offer_product_line_id" groups="base.group_user"/>

                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_subscription_line_all_act">
            <field name="name">Subscription Lines</field>
            <field name="res_model">training.subscription.line</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="view_id" ref="training_subscription_line_tree"/>
        </record>


<!-- training.offer.purchase.line.log -->
        <record model="ir.ui.view" id="training_offer_purchase_line_log_tree">
            <field name="name">training.offer.purchase.line.log.tree</field>
            <field name="model">training.offer.purchase.line.log</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Purchase Line Update Log">
                    <field name="date"/>
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="training_offer_purchase_line_log_form">
            <field name="name">training.offer.purchase.line.log.form</field>
            <field name="model">training.offer.purchase.line.log</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Purchase Line Update Log">
                    <field name="name"/>
                    <field name="date"/>
                    <separator string="Log Details" colspan="4"/>
                    <field name="log" nolabel="1" colspan="4"/>
                </form>
            </field>
        </record>

        <act_window id="offer_purchase_line_log_link"
            name="Procurements Update Logs"
            src_model="training.offer"
            res_model="training.offer.purchase.line.log"
            domain="[('offer_id', '=', active_id)]"/>


<!-- training.offer.purchase.line.update.wizard -->
        <record model="ir.ui.view" id="training_offer_purchase_line_wizard_form">
            <field name="name">training.offer.purchase.line.update.wizard</field>
            <field name="model">training.offer.purchase.line.update.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Procurements Update">
                    <group colspan="4" col="2" states="confirm">
                        <label string="Are you sure you want to update procurements all opened seance in all future session?" colspan="2"/>
                        <button string="Cancel" special="cancel" name="action_close"/>
                        <button string="Confirm" type="object" name="action_confirm"/>
                    </group>
                    <group colspan="4" col="4" states="update" expand="1">
                        <field name="name"/>
                        <field name="date"/>
                        <separator string="Log Details" colspan="4"/>
                        <field name="log" colspan="4" nolabel="1"/>
                    </group>
                    <field name="state" invisible="1"/>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_offer_purchase_line_wizard_act">
            <field name="name">Procurements Update</field>
            <field name="res_model">training.offer.purchase.line.update.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>


<!-- training.offer -->
       <record id="training_offer_search" model="ir.ui.view">
            <field name="name">training.offer.search</field>
            <field name="model">training.offer</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Offer">
                   <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="Draft" domain="[('state','=','draft')]" help="Offers State Draft."/>
                        <filter icon="terp-camera_test" string="Validated" domain="[('state','=','validated')]" help="Offers State Validated."/>
                        <filter icon="terp-personal+" string="Member" domain="['|',('create_uid', '=', uid)]" help="Offers I have created." default="1"/>
                        <separator orientation="vertical"/>
                        <field name="name" string="Name"/>
                        <field name="course_ids" string="Course"/>
                        <field name="product_id" string="Product"/>
                   </group>
                   <newline/>
                   <group expand="0" string="Group By...">
                        <filter string="State" icon="terp-stock_effects-object-colorize" domain="[]"  context="{'group_by':'state'}"/>
                        <filter string="Type" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'type_id'}"/>
                        <filter string="Product" icon="terp-accessories-archiver" domain="[]" context="{'group_by' : 'product_line_id'}"/>
                        <filter string="Kind" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'kind'}"/>
                        <filter string="Language" icon="terp-stage" domain="[]" context="{'group_by' : 'lang_id'}"/>
                        <filter string="Format" icon="terp-stock_symbol-selection" domain="[]" context="{'group_by' : 'format_id'}"/>
                   </group>
                   </search>
            </field>
        </record>

        <record model="ir.ui.view" id="training_offer_form">
            <field name="name">training.offer.form</field>
            <field name="model">training.offer</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Offer" col="4">
                    <separator string="Offer Description" colspan="4"/>
                    <group col="6" colspan="4" attrs="{'readonly' : [('state', '!=', 'draft')]}">
                        <field name="name"/>
                        <field name="kind"/>
                        <field name="lang_id" attrs="{'required' : [('kind', '=', 'standard')]}"/>
                        <field name="product_line_id"/>
                        <field name="type_id"/>
                        <field name="is_certification"/>
                    </group>
                    <notebook colspan="4">
                        <page string="Courses">
                            <field name="course_ids"
                                colspan="4"
                                nolabel="1"
                                attrs="{'readonly' : [('state', '!=', 'draft')]}"
                                context="{'default_lang_id' : lang_id}"
                                on_change="on_change_course_ids(course_ids)">
                                <tree string="Courses">
                                    <field name="course_id" domain="[('lang_id', '=', lang_id),('state_course', '=', 'validated')]" on_change="on_change_course(course_id)"/>
                                    <field name="category_id"/>
                                    <field name="kind"/>
                                    <field name="course_type_id"/>
                                    <field name="lang_id"/>
                                    <field name="duration" widget='float_time'/>
                                    <field name="sequence" invisible="1"/>
                                </tree>
                                <form string="Course">
                                    <separator string="Course Information" colspan="4"/>
                                    <field name="course_id"/>
                                    <field name="category_id"/>
                                    <field name="kind"/>
                                    <field name="course_type_id"/>
                                    <field name="lang_id"/>
                                    <field name="duration" widget='float_time'/>
                                </form>
                            </field>
                            <field name="is_standalone"/>
                            <field name="duration"/>
                        </page>
                        <page string="Description">
                            <field name="target_public_id" select="1"/>
                            <field name="format_id" attrs="{'readonly' : [('state', '!=', 'draft')]}"/>
                            <field name="product_id" attrs="{'readonly' : [('state', '!=', 'draft')], 'required' : [('kind', '=', 'standard')]}"/>
                            <field name="sequence"/>
                            <separator string="Objective" colspan="4"/>
                            <field name="objective" nolabel="1" colspan="4"/>
                            <separator string="Offer Content (Internet Index)" colspan="4"/>
                            <field name="description" nolabel="1" colspan="4"/>
                            <separator string="Requeriments" colspan="4"/>
                            <field name="requeriments" nolabel="1" colspan="4"/>
                            <separator string="Management" colspan="4"/>
                            <field name="management" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Procurements">
                            <field name="purchase_line_ids" nolabel="1" colspan="4" attrs="{'readonly' : [('state', '!=', 'draft')]}" context="{'default_offer_id' : active_id}">
                                <form string="Procurement">
                                    <field name="offer_id" invisible="1"/>
                                    <field name="auto_update"/>
                                    <separator string="Automatic Declaration" colspan="4"/>
                                    <field name="product_id" on_change="on_change_product(product_id)"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <separator string="Manual Description" colspan="4"/>
                                    <field name="description" colspan="4"/>
                                    <field name="product_price"/>
                                    <separator string="Attachment" colspan="4"/>
                                    <field name="attachment_id"
                                        context="{'course_ids' : parent.course_ids}"
                                        on_change="on_change_attachment(attachment_id)"/>
                                    <field name="attachment_price"/>
                                    <field name="fix"/>
                                    <field name="procurement_quantity"/>
                                    <field name="course_id" context="{'offer_id' : offer_id}"/>
                                </form>
                                <tree string="Procurements" editable="bottom">
                                    <field name="offer_id" invisible="1"/>
                                    <field name="course_id" context="{'offer_id' : offer_id}"/>
                                    <field name="product_id" on_change="on_change_product(product_id)"/>
                                    <field name="description"/>
                                    <field name="product_qty"/>
                                    <field name="product_uom"/>
                                    <field name="product_price"/>
                                    <field name="attachment_id"
                                        context="{'course_ids' : parent.course_ids}"
                                        on_change="on_change_attachment(attachment_id)"/>
                                    <field name="attachment_price"/>
                                    <field name="fix"/>
                                    <field name="procurement_quantity"/>
                                    <field name="auto_update"/>
                                </tree>
                            </field>
                            <button name="action_load_procurements"
                                type="object"
                                string="Load Procurements From Courses" colspan="4"
                                attrs="{'invisible' : [('state', '=', 'validated')]}"/>
                            <button name="%(training_offer_purchase_line_wizard_act)d"
                                type="action"
                                string="Update Seance Procurments" colspan="4"/>
                        </page>
                        <page string="Pedagogical Suggestion">
                            <separator string="Preliminary Offers (Internet)" colspan="4"/>
                            <field name="preliminary_offer_ids" nolabel="1" colspan="4">
                                <tree string="Preliminary Offers">
                                    <field name="name"/>
                                </tree>
                            </field>
                            <separator string="Complementary Offers (Internet)" colspan="4"/>
                            <field name="complementary_offer_ids" nolabel="1" colspan="4">
                                <tree string="Complementary Offers">
                                    <field name="name"/>
                                </tree>
                            </field>
                            <separator string="Included Offers (Internet)" colspan="4"/>
                            <field name="included_offer_ids" nolabel="1" colspan="4">
                                <tree string="Included Offers">
                                    <field name="name"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Themes">
                            <field name="theme_ids" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Notification Note">
                            <field name="notification_note" nolabel='1' colspan='4'/>
                        </page>
                    </notebook>
                    <group col="5" colspan="4">
                        <field name="state"/>
                        <button name="signal_validate" string="Validate" type="workflow" states="draft"
                            confirm="Do you want to validate this offer ?"/>
                        <button name="signal_deprecate" string="Deprecate" type="workflow" states="validated,draft" 
                            confirm="Do you want to deprecate this offer ?"/>
                        <button name="draft_cb" string="Draft" type="object" states="validated,deprecated"
                            confirm="Are you sure to reset to Draft (Check the sessions for this offer) ?"
                            groups="training.group_offer_manager"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_offer_tree">
            <field name="name">training.offer.tree</field>
            <field name="model">training.offer</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Offers" colors="red:state=='draft';gray:state=='deprecated';black:state=='validated'">
                    <field name="name"/>
                    <field name="type_id"/>
                    <field name="kind"/>
                    <field name="product_id"/>
                    <field name="target_public_id"/>
                    <field name="format_id"/>
                    <field name="create_date"/>
                    <field name="is_standalone"/>
                    <field name="state"/>
                    <field name="sequence" select="2"/>
                    <field name="product_line_id"/>
                    <field name="lang_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_offer_all_act">
            <field name="name">Offers</field>
            <field name="res_model">training.offer</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
	        <field name="domain">[('kind','in',['standard','exam'])]</field>
        </record>

        <act_window
            id="offer_session_link"
            name="Planned Sessions"
            src_model="training.offer"
            res_model="training.session"
            domain="[('offer_id', '=', active_id)]"/>

        <act_window
            id="offer_course_link"
            name="Courses"
            src_model="training.offer"
            res_model="training.course"
            domain="[]"
            context="{'offer_id' : active_id}"/>


<!-- training.participation -->
       <record model="ir.ui.view" id="training_participation_search">
            <field name="name">training.participation.search</field>
            <field name="model">training.participation</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Course">
                   <group col='15' colspan='4'>
                       <filter icon="terp-go-week" string="Seance" domain="[]" context="{'group_by' : 'seance_id'}"/>
                       <separator orientation="vertical"/>
                       <filter icon="terp-camera_test" string="Present" context="{'job_search_context': 'show_past'}" domain="[('present','=',1)]" help="Present participants."/>
                       <filter icon="terp-gtk-stop" string="Absent" context="{'job_search_context': 'show_past'}" domain="[('present','=',0)]" help="Absent participants."/>
                       <separator orientation="vertical"/>
                       <field name="partner_id" string="Partner"/>
                       <field name="job_id" string="Participant"/>
                       <field name="seance_id" string="Seance"/>

                       <field name="group_id" string="Group"/>
                   </group>
                   <newline/>
                   <group expand="0" string="Extended Filters...">
                       <field name="seance_date" string="Seance Date"/>
                       <field name="contact_id" string="Contact"/>
                       <field name="kind" string="Kind"/>
                   </group>
                    <group expand="0" string="Group By...">
                        <filter string="Group" icon="terp-accessories-archiver" domain="[]" context="{'group_by':'group_id'}"/>
                        <separator orientation="vertical"/>
                        <filter string="Date" icon="terp-go-month" domain="[]" context="{'group_by':'date'}"/>
                    </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="view_training_participation_form">
            <field name="name">training.participation.form</field>
            <field name="model">training.participation</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Participation">
                    <separator string="Participation Description" colspan="4"/>
                    <field name="job_id"/>
                    <field name="partner_id"/>
                    <field name="seance_id" on_change="on_change_seance(seance_id)"/>
                    <field name="group_id"/>
                    <field name="date"/>
                    <field name="course_id"/>
                    <field name="present"/>
                    <notebook colspan="4">
                        <page string="General" groups="base.group_user">
                            <field name="subscription_id"/>
                            <field name="subscription_line_id"/>
                        </page>
                        <page string="Summary" groups="base.group_user">
                            <field name="summary" nolabel="1" colspan="4"/>
                        </page>
                        <page string="Procurements" groups="base.group_user">
                            <field name="purchase_ids" colspan="4" nolabel="1"/>
                            <field name="purchase_state"/>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_training_participation_tree">
            <field name="name">training.participation.tree</field>
            <field name="model">training.participation</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Participations">
                    <field name="date"/>
                    <field name="seance_id"/>
                    <field name="course_id"/>
                    <field name="duration"/>
                    <field name="contact_firstname"/>
                    <field name="contact_lastname"/>
                    <field name="partner_id" groups="base.group_user"/>
                    <field name="present"/>
                    <!--<field name="kind"/>-->
                    <field name="subscription_line_id" groups="base.group_user"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_training_participation_all">
            <field name="name">Participations</field>
            <field name="res_model">training.participation</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
	        <field name="context">{'job_search_context': 'show_past'}</field>
        </record>


<!-- training.participation.stakeholder.request -->
       <record model="ir.ui.view" id="training_participation_stakeholder_request_search">
            <field name="name">training.participation.stakeholder.request.search</field>
            <field name="model">training.participation.stakeholder.request</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Participation Stakeholder Request">
                    <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="To Validate" domain="[('state','=','draft')]" help="Requests to validate."/>
                        <filter icon="terp-mail-forward" string="To Send" domain="[('state','=','valid')]" help="Requests to send."/>
                        <filter icon="terp-emblem-important" string="Awaiting Response" domain="[('state','=','requested')]" help="Requests awaiting response."/>
                        <filter icon="terp-check" string="Accepted" domain="[('state','=','accepted')]" help="Accepted requests."/>
                        <filter icon="terp-dialog-close" string="Refused" domain="[('state','=','refused')]" help="Refused requests."/>
                        <filter icon="terp-gtk-stop" string="Cancelled" domain="[('state','=','cancelled')]" help="Cancelled requests."/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended Filters...">
                        <field name="session_id" string="Session"/>
                        <field name="date" string="First Seance Date"/>
                        <field name="kind" string="Offer's Kind"/>
                        <newline/>
                        <field name="job_id" string="Contact"/>
                        <field name="email" string="Email"/>
                        <field name="payment_mode" string="Payment Mode"/>
                    </group>
               </search>
            </field>
        </record>

        <record model='ir.ui.view' id='view_participation_stakeholder_request_form'>
            <field name="name">training.participation.stakeholder.request.form</field>
            <field name="model">training.participation.stakeholder.request</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Participation Request">
                    <group colspan="4" col="6" attrs="{'readonly': [('state', '!=', 'draft')]}">
                        <field name="reference" colspan="6"/>
                        <field name="session_id"/>
                        <field name="kind" groups="training.group_training"/>
                        <field name="date" groups="training.group_training"/>
                        <field name="job_id" attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="email" widget='email' attrs="{'readonly': [('state', '!=', 'draft')]}"/>
                    </group>
                    <group colspan="4" col="7">
                        <field name="payment_mode"/>
                        <field name="price"/>
                        <field name="purchase_order_id" groups="training.group_training"/>
                        <button type="object" name="action_create_purchase_order" string="Create Purchase Order" 
                            attrs="{'invisible' : [('purchase_order_id', '!=', False)]}"
                            groups="training.group_training"/>
                        <field name="amount_to_pay" groups="training.group_training"/>
                    </group>
                    <notebook colspan="4">
                        <page string="Participations">
                            <field name="participation_ids" colspan="4" nolabel="1" attrs="{'readonly': [('state', '!=', 'draft')]}" context="{'default_job_id': job_id, 'default_request_session_id': session_id}">
                                <tree string="Participations">
                                    <field name="date"/>
                                    <field name="seance_id"/>
                                    <field name="group_id"/>
                                    <field name="course_id"/>
                                    <field name="duration"/>
                                    <field name="paid"/>
                                    <field name="product_id" groups="training.group_training"/>
                                    <field name="manual_price" groups="training.group_training"/>
                                    <field name="price"/>
                                    <field name="state"/>
                                </tree>
                            </field>
                        </page>
                        <page string="Notes">
                            <field name="notes" colspan="4" nolabel="1"/>
                        </page>
                    </notebook>
                    <group colspan="4" col="10">
                        <field name="state"/>
                        <button type="workflow" name="pshr_validate" string="Validate" states="draft" 
                            confirm="Do you want to validate this request ?"/>
                        <button type="workflow" name="pshr_request" string="Send Request" states="valid"/>
                        <button type="workflow" name="pshr_resend_email" string="Resend Request Email" states="requested" groups="training.group_training"/>
                        <button type="workflow" name="pshr_accept" string="Accept" states="requested,valid" 
                            confirm="Do you want to confirm this request ?"/>
                        <button type="workflow" name="pshr_refuse" string="Refuse" states="requested" 
                            confirm="Do you want to refuse this request ?"/>
                        <button type="workflow" name="pshr_cancel" string="Cancel"
                            states="draft,valid,requested,accepted" 
                            groups="training.group_request_manager" 
                            confirm="Do you want to cancel this request ?"/>
                        <button type="workflow" name="pshr_done" string="Done" states="accepted" groups="training.group_request_manager"/>
                    </group>
                </form>
            </field>
        </record>

        <act_window id="purchase_order_participation_requests"
            name="Purchase Order"
            src_model="training.participation.stakeholder.request"
            res_model="purchase.order"
            view_mode="tree,form" 
            groups="base.group_user"
            domain="[('id', '=', purchase_order_id)]"/>

        <record model="ir.ui.view" id="view_participation_stakeholder_request_tree">
            <field name="name">training.participation.stakeholder.request.tree</field>
            <field name="model">training.participation.stakeholder.request</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Participation Requests">
                    <field name="reference"/>
                    <field name="session_id"/>
                    <field name="date"/>
                    <field name="kind"/>
                    <field name="job_id"/>
                    <field name="price"/>
                    <field name="amount_to_pay" groups="training.group_training"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="participation_stakeholder_request_act">
            <field name="name">Stakeholders Requests</field>
            <field name="res_model">training.participation.stakeholder.request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.participation.stakeholder -->
       <record model="ir.ui.view" id="training_participation_stakeholder_search">
            <field name="name">training.participation.stakeholder.search</field>
            <field name="model">training.participation.stakeholder</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Participation Stakeholder">
                    <group col='15' colspan='4'>
                        <filter icon="terp-document-new" string="To Validate" domain="[('state','=','draft')]" help="Requests to validate."/>
                        <filter icon="terp-check" string="Accepted" domain="[('state','=','accepted')]" help="accepted."/>
                        <filter icon="terp-dialog-close" string="Refused" domain="[('state','=','refused')]" help="refused."/>
                        <filter icon="terp-gtk-stop" string="Cancelled" domain="[('state','=','cancelled')]" help="cancelled."/>
                        <filter icon="terp-check" string="Done" domain="[('state','=','done')]" help="done."/>
                    </group>
                    <newline/>
                    <group expand="0" string="Extended Filters...">
                        <field name="seance_id" string="Seance"/>
                        <field name="group_id" string="Group"/>
                        <field name="partner_id" string="Partner"/>
                        <field name="date" string="Date"/>
                        <field name="kind" string="Kind"/>
                        <newline/>
                        <field name="course_id" string="Course"/>
                        <field name="state" string="State"/>
                        <field name="paid" string="Invoiced &amp; Paid"/>
                        <field name="contact_id" string="Contact"/>
                        <field name="product_id" string="Product"/>
                    </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="view_training_participation_stakeholder_form">
            <field name="name">training.participation.stakeholder.form</field>
            <field name="model">training.participation.stakeholder</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Participation">
                    <group colspan="4" col="4" groups="base.group_user">
                        <separator string="Contact Information" colspan="4"/>
                        <field name="job_id" colspan="4"/>
                    </group>
                    <separator string="Seance Information" colspan="4"/>
                    <field name="request_session_id" invisible="1"/>
                    <field name="seance_id" attrs="{'readonly' : [('state', '!=', 'draft')]}" on_change='on_change_seance(job_id, seance_id)' context="{'request_session_id' : request_session_id, 'job_id' : job_id}"/>
                    <field name="group_id"/>
                    <field name="kind"/>
                    <field name="date"/>
                    <field name="duration"/>
                    <field name="state_seance" groups="training.group_seance_manager,training.group_session_manager"/>
                    <separator string="Course Information" colspan="4"/>
                    <field name="course_id" colspan="4"/>
                    <separator string="Payment" colspan="4"/>
                    <field name="purchase_order_id" groups="training.group_seance_manager,training.group_session_manager"/>
                    <group colspan="2" col="3" attrs="{'readonly': [('state', '!=', 'draft')]}">
                        <group col="2" attrs="{'invisible': [('manual_price', '=', True)]}"> 
                            <field name="price"/>
                        </group>
                        <group col="2" attrs="{'invisible': [('manual_price', '=', False)]}"> 
                            <field name="forced_price"/>
                        </group>
                        <group col="2" groups="training.group_training">
                            <field name="manual_price" nolabel="1" on_change='on_change_manual(manual_price, job_id, seance_id)'/>
                            <label align="0.0" string="Manual"/>
                        </group>
                    </group>
                    <field name="product_id" groups="training.group_seance_manager,training.group_session_manager" on_change='on_change_product(job_id, seance_id, product_id)'/>
                    <field name="paid" groups="training.group_training"/>
                    <separator colspan="4"/>
                    <field name="state" colspan="4"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="view_training_participation_stakeholder_tree">
            <field name="name">training.participation.stakeholder.tree</field>
            <field name="model">training.participation.stakeholder</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Participations">
                    <field name="job_id"/>
                    <field name="partner_id"/>
                    <field name="date"/>
                    <field name="seance_id"/>
                    <field name="group_id"/>
                    <field name="course_id"/>
                    <field name="duration"/>
                    <field name="paid"/>
                    <field name="product_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="action_training_participation_stakeholder_all">
            <field name="name">Stakeholders Participations</field>
            <field name="res_model">training.participation.stakeholder</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.subscription.mass.line -->
        <record model="ir.ui.view" id="subscription_mass_line_form">
            <field name="name">subscription_mass_line_form</field>
            <field name="model">training.subscription.mass.line</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Session">
                    <field name="session_id"/>
                    <field name="kind" invisible="1"/>
                    <field name="allow_closed_session" on_change="on_change_allow_closed_session(allow_closed_session)"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="subscription_mass_line_tree">
            <field name="name">subscription.mass.line.tree</field>
            <field name="model">training.subscription.mass.line</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Sessions">
                    <field name="session_id"/>
                    <field name="kind" invisible="1"/>
                </tree>
            </field>
        </record>


<!-- training.subscription.line.second -->
       <record model="ir.ui.view" id="training_subscription_line_second_search">
            <field name="name">training.subscription.line.second.search</field>
            <field name="model">training.subscription.line.second</field>
            <field name="type">search</field>
            <field name="arch" type="xml">
                <search string="Search Subscription">
                   <group col='15' colspan='4'>
                        <field name="job_id" string="Contact"/>
                        <field name="partner_id" string="Partner"/>
                        <field name="session_id" string="Session"/>
                   </group>
               </search>
            </field>
        </record>

        <record model="ir.ui.view" id="subscription_line_second_form">
            <field name="name">training.subscription.line.second.form</field>
            <field name="model">training.subscription.line.second</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Subscription Lines">
                    <field name="job_id"/>
                    <field name="partner_id"  attrs="{'readonly':[('partner_id','=',True)]}"/>
                    <field name="session_id"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="subscription_line_second_tree">
            <field name="name">training.subscription.line.second.tree</field>
            <field name="model">training.subscription.line.second</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Subscription Lines" colors="red:partner_id == False;green:partner_id != False">
                    <field name="job_id"/>
                    <field name="partner_id"/>
                    <field name="session_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="subscription_line_second_all_act">
            <field name="name">Subscription Lines without Partner</field>
            <field name="res_model">training.subscription.line.second</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.subscription.mass.wizard -->
        <record model="ir.ui.view" id="training_subscription_mass_wizard">
            <field name="name">training.subscription.mass.wizard</field>
            <field name="model">training.subscription.mass.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Mass Subscription" col="2">
                    <group groups='base.group_user' colspan="2" col="2">
                        <separator string="Partner" colspan="2"/>
                        <field name="partner_id" string="Partner Filter"/>
                    </group>
                    <separator string="Participants" colspan="2"/>
                    <field name="job_ids" nolabel="1" colspan="2" mode="tree" context="{'partner_id' : partner_id}">
                        <tree string="Participants">
                            <field name="contact_id"/>
                            <field name="name" groups="base.group_user"/>
                            <field name="email"/>
                            <field name="pricelist_id" groups="base.group_user"/>
                        </tree>
                    </field>
                    <separator string="Sessions" colspan="2"/>
                    <field name="session_ids" nolabel="1" colspan="2"/>
                    <separator colspan="2"/>
                    <group colspan="2" col="2" >
                        <button name="action_cancel" string="_Cancel" icon="gtk-cancel" special="cancel"/>
                        <button name="action_apply" type="object" string="_Apply" icon="gtk-apply"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_subscription_mass_act">
            <field name="name">Mass Subscription</field>
            <field name="res_model">training.subscription.mass.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="training_subscription_mass_wizard"/>
            <field name="target">new</field>
            <field name="context">{'record_id' : False}</field>
        </record>

        <record model="ir.actions.act_window" id="training_subscription_mass_from_subscription_act">
            <field name="name">Mass Subscription</field>
            <field name="res_model">training.subscription.mass.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="training_subscription_mass_wizard"/>
            <field name="target">new</field>
            <field name="context">{'record_id' : active_id}</field>
        </record>

         <record model="ir.values" id="training_subscription_mass_related">
            <field name="model_id" ref="training.model_training_subscription"/>
            <field name="object" eval="1"/>
            <field name="name">Mass Subscription</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,' + str(ref('training_subscription_mass_from_subscription_act'))"/>
            <field name="key">action</field>
            <field name="model">training.subscription</field>
        </record>


<!-- training.config.contact.function -->
        <record model="ir.ui.view" id="training_config_contact_function_tree">
            <field name="name">training.config.contact.function.tree</field>
            <field name="model">training.config.contact.function</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Contact Function Configuration">
                    <field name="kind"/>
                    <field name="function"/>
                </tree>
            </field>
        </record>

        <record model="ir.ui.view" id="training_config_contact_function_form">
            <field name="name">training.config.contact.function.form</field>
            <field name="model">training.config.contact.function</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Contact Function Configuration">
                    <field name="kind"/>
                    <field name="function"/>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_config_contact_function_act">
            <field name="name">Stakeholder functions</field>
            <field name="res_model">training.config.contact.function</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

<!--training.offer.public.target -->
        <record model="ir.ui.view" id="training_offer_public_form">
            <field name="name">training.offer.public.target.form</field>
            <field name="model">training.offer.public.target</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Target Audience">
                    <field name="name" colspan="4"/>
                    <separator string="Target Audience (Internet)" colspan="4"/>
                    <field name="note" nolabel="1" colspan="4"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_offer_public_tree">
            <field name="name">training.offer.public.target.tree</field>
            <field name="model">training.offer.public.target</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Target Audience">
                    <field name="name"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_offer_public_act">
            <field name="name">Target Audience</field>
            <field name="res_model">training.offer.public.target</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.course.pending -->
        <record model="ir.ui.view" id="course_pending_form">
            <field name="name">training.course.pending.form</field>
            <field name="model">training.course.pending</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Pending">
                    <separator string="Course Information" colspan="4"/>
                    <field name="course_id"/>
                    <field name="category_id"/>
                    <field name="type_id"/>
                    <field name="lang_id"/>
                    <separator string="Information" colspan="4"/>
                    <field name="type"/>
                    <field name="create_date"/>
                    <field name="date"/>
                    <field name="purchase_order_id"/>
                    <separator string="Contact Information" colspan="4"/>
                    <field name="job_id" on_change="on_change_job(job_id)"/>
                    <field name="job_email"/>
                    <separator string="Internal Contact" colspan="4"/>
                    <field name="followup_by"/>
                    <separator string="Reason" colspan="4"/>
                    <field name="reason" colspan="4" nolabel="1"/>
                    <!--
                    <separator string="Actions" colspan="4"/>
                    <button name="action_open_course" colspan="2" type="object" string="Open Course"/>
                    <button name="action_validate_course" colspan="2" type="object" string="Validate Course"/>
                    -->
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="course_pending_calendar">
            <field name="name">training.course.pending.calendar</field>
            <field name="model">training.course.pending</field>
            <field name="type">calendar</field>
            <field name="arch" type="xml">
                <calendar color="course_id" string="Courses in Pending" date_start="date">
                    <field name="course_id"/>
                    <field name="type"/>
                    <field name="date"/>
                    <field name="reason"/>
                </calendar>
            </field>
        </record>

        <record model="ir.ui.view" id="course_pending_tree">
            <field name="name">training.course.pending.tree</field>
            <field name="model">training.course.pending</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Courses in Pending">
                    <field name="course_id"/>
                    <field name="category_id"/>
                    <field name="type_id"/>
                    <field name="lang_id"/>
                    <field name="type"/>
                    <field name="create_date"/>
                    <field name="date"/>
                    <field name="reason"/>
                    <field name="seance_next_date"/>
                    <field name="job_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="course_pending_all_act">
            <field name="name">Courses Pending Reviews (Update)</field>
            <field name="res_model">training.course.pending</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,calendar</field>
            <field name="domain">[('todo', '=', 0)]</field>
        </record>


<!-- training.group -->
        <record model="ir.ui.view" id="group_form">
            <field name="name">training.group.form</field>
            <field name="model">training.group</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Group">
                    <separator string="Information" colspan="4"/>
                    <field name="name"/>
                    <field name="session_id" required="1"/>
                    <separator string="Seances" colspan="4"/>
                    <field name="seance_ids" colspan="4" nolabel="1"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="group_tree">
            <field name="name">training.group.tree</field>
            <field name="model">training.group</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Groups">
                    <field name="name"/>
                    <field name="session_id"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="group_all_act">
            <field name="name">Groups</field>
            <field name="res_model">training.group</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.session.duplicate.wizard -->
        <record model="ir.ui.view" id="session_duplicate_wizard">
            <field name="name">training.session.duplicate.wizard</field>
            <field name="model">training.session.duplicate.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Duplicate Session" col="2">
                    <group colspan="2" col="2">
                        <field name="session_id" colspan="2"/>
                        <field name="group_id" colspan="2" context="{'default_session_id' : session_id}" attrs="{'readonly' : [('session_id', '=', False)],'required' : [('session_id', '!=', False)]}"/>
                        <separator string="Participants" colspan="2"/>
                        <field name="subscription_line_ids" colspan="2" height="250" nolabel="1" attrs="{'readonly' : [('group_id', '=', False)]}">
                            <tree string="Participants">
                                <field name="job_id"/>
                                <field name="job_email"/>
                                <field name="partner_id"/>
                            </tree>
                        </field>
                    </group>
                    <separator string="" colspan="2"/>
                    <group col="2" colspan="2">
                        <button name="action_cancel" type="object" special="cancel" string="Cancel" icon="gtk-cancel"/>
                        <button name="action_apply" type="object" string="Duplicate" icon="gtk-apply"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="session_duplicate_wizard_act">
            <field name="name">Duplicate Session</field>
            <field name="res_model">training.session.duplicate.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>

        <record model="ir.actions.act_window" id="session_duplicate_wizard_act">
            <field name="name">Duplicate Session</field>
            <field name="res_model">training.session.duplicate.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="view_id" ref="session_duplicate_wizard"/>
            <field name="target">new</field>
            <field name="context">{'record_id' : active_id}</field>
        </record>


<!-- training.session -->
         <record model="ir.values" id="training_session_duplicate_related">
            <field name="model_id" ref="training.model_training_session"/>
            <field name="object" eval="1"/>
            <field name="name">Duplicate Session</field>
            <field name="key2">client_action_multi</field>
            <field name="value" eval="'ir.actions.act_window,' + str(ref('session_duplicate_wizard_act'))"/>
            <field name="key">action</field>
            <field name="model">training.session</field>
        </record>


<!-- training.config.product -->
        <record model="ir.ui.view" id="training_config_product_form">
            <field name="name">training.config.product.form</field>
            <field name="model">training.config.product</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Config Product">
                    <field name="product_id"/>
                    <field name="type"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_config_product_tree">
            <field name="name">training.config.product.tree</field>
            <field name="model">training.config.product</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Config Product">
                    <field name="product_id"/>
                    <field name="type"/>
                </tree>
            </field>
        </record>


<!-- training.config.product -->
        <record model="ir.actions.act_window" id="training_config_product_all_act">
            <field name="name">Default Product</field>
            <field name="res_model">training.config.product</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- purchase.order -->
        <record model="ir.ui.view" id="purchase_order_form">
            <field name="name">training.purchase.order.form</field>
            <field name="model">purchase.order</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <page string="Notes" position="after">
                    <page string="Supplier Info">
                        <field name="date_approved"/>
                    </page>
                </page>
            </field>
        </record>


<!-- purchase.order.line -->
        <record model="ir.ui.view" id="purchase_order_line_form">
            <field name="name">training.purchase.order.line.form</field>
            <field name="model">purchase.order.line</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="purchase.purchase_order_line_form"/>
            <field name="arch" type="xml">
                <data>
                    <xpath expr="/form/notebook/page/field['product_id']" position="before">
                        <field name="seance_id_int" select="1"/>
                        <field name="seance_id" select="1"/>
                        <field name="course_id" select="1"/>
                    </xpath>
                </data>
            </field>
        </record>

        <record model="ir.ui.view" id="purchase_order_line_tree">
            <field name="name">training.purchase.order.line.tree</field>
            <field name="model">purchase.order.line</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="purchase.purchase_order_line_tree"/>
            <field name="arch" type="xml">
                <data>
                    <field name="product_id" position="before">
                        <field name="seance_id_int" select="1"/>
                        <field name="seance_id" select="1"/>
                        <field name="course_id" select="1"/>
                    </field>
                    <field name="price_subtotal" position="after">
                        <field name="notes"/>
                        <field name="state"/>
                    </field>
                </data>
            </field>
        </record>


<!-- training.config.penality -->
        <record model="ir.ui.view" id="training_config_penality_form">
            <field name="name">training.config.penality.form</field>
            <field name="model">training.config.penality</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Penality">
                    <field name="trigger"/>
                    <field name="rate"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_config_penality_tree">
            <field name="name">training.config.penality.tree</field>
            <field name="model">training.config.penality</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Penality">
                    <field name="trigger"/>
                    <field name="rate"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_config_penality_act">
            <field name="name">Penalities</field>
            <field name="res_model">training.config.penality</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.config.invoice -->
        <record model="ir.ui.view" id="training_config_invoice_form">
            <field name="name">training.config.invoice.form</field>
            <field name="model">training.config.invoice</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Threshold Invoices">
                    <field name="threshold"/>
                    <field name="price"/>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="training_config_invoice_tree">
            <field name="name">training.config.invoice.tree</field>
            <field name="model">training.config.invoice</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Threshold Invoices">
                    <field name="threshold"/>
                    <field name="price"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_config_invoice_act">
            <field name="name">Thresholds Invoices</field>
            <field name="res_model">training.config.invoice</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>


<!-- training.participation.reassign.wizard -->
        <record model="ir.ui.view" id="training_participation_reassign_wiz_form">
            <field name="name">training.participation.reassign.wizard.form</field>
            <field name="model">training.participation.reassign.wizard</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reassign Participation to Seance">
                    <separator string="Participation Information" colspan="4"/>
                    <field name="participation_id" on_change="on_change_participation(participation_id)" colspan="4"/>
                    <separator string="Seance Information" colspan="4"/>
                    <field name="participation_sl"/>
                    <field name="participation_session_id"/>
                    <field name="participation_seance_id"/>
                    <field name="participation_seance_date"/>
                    <separator string="Seance Destination" colspan="4"/>
                    <field name="seance_id" colspan="4" on_change="on_change_seance(seance_id)"/>
                    <group col="2" colspan="4">
                        <button name="close_cb" string="Cancel" type="object" special="cancel" icon="gtk-cancel"/>
                        <button name="apply_cb" string="Apply" type="object" icon="gtk-apply" 
                            confirm="Are you sure to want to move this participation to this seance ?"/>
                    </group>
                </form>
            </field>
        </record>

        <record model="ir.actions.act_window" id="training_participation_reassign_wiz_act">
            <field name="name">Participation Reassignation</field>
            <field name="res_model">training.participation.reassign.wizard</field>
            <field name="view_type">form</field>
            <field name="view_mode">form</field>
            <field name="target">new</field>
        </record>


<!-- menus -->
        <menuitem id="training_mi" name="Training" icon="terp-go-home"/>
        <!--Address Book-->
        <menuitem id="training.menu_address_book" name="Address Book" parent="training_mi" sequence="5"/>
        <menuitem id="training.menu_partner_form" action="base.action_partner_form" parent="training.menu_address_book"/>
        <menuitem id="training.menu_partner_contact_form" action="base_contact.action_partner_contact_form" parent="training.menu_address_book"/>
        <menuitem id="training.menu_partner_address_form" action="base.action_partner_address_form" parent="training.menu_address_book" groups="base.group_extended"/>
        <!--Library-->
        <menuitem id="training_library_mi" name="Library" parent="training_mi" sequence="10"/>
        <menuitem id="training_library_course_mi" parent="training_library_mi" name="Courses" action="training_course_all_act" sequence="10"/>
        <menuitem parent="training_library_course_mi" action="course_pending_all_act" name="Course Reviews" id="course_pending_mi"/>
        <menuitem id="training_offer_mi" parent="training_library_mi" name="Offers" action="training_offer_all_act" sequence="20"/>
        <menuitem id="training_offer_catalog_all_mi" parent="training_library_mi" action="training_catalog_all_act" sequence="30"/>
        <!--Plannings-->
        <menuitem id="training_planning_mi" name="Plannings" parent="training_mi" sequence="10"/>
        <menuitem id="training_planning_session_future_all_mi" parent="training_planning_mi" action="training_session_future_all_act" name="Sessions" sequence="10"/>
        <menuitem id="training_planning_session_calendar_mi" parent="training_planning_mi" action="training_session_planning_act" name="Session Calendar" sequence="20"/>
        <menuitem id="training_planning_future_seances_mi" parent="training_planning_mi" action="training_seance_future_all_act" name="Seances" sequence="30"/>
        <menuitem id="training_planning_seances_planning_mi" parent="training_planning_mi" action="training_seance_planning_act" name="Seances Calendar" sequence="40"/>
        <menuitem id="training_planning_seance_purchase_line_mi" parent="training_planning_mi" action="training_seance_purchase_line_act" name="Seance Procurements" sequence="50"/>
        <menuitem id="group_all_mi"  parent="training_planning_mi" action="group_all_act" name="Groups" sequence="60"/>
        <!--Subscription-->
        <menuitem id="training_subscription_management_mi" name="Subscriptions" parent="training_mi" sequence="10"/>
        <menuitem id="training_subscription_management_subscription_mi" parent="training_subscription_management_mi" action="training_subscription_all_act" sequence="10"/>
        <menuitem id="training_subscription_management_subscription_new_mi" parent="training_subscription_management_mi" action="training_subscription_new_act" sequence="20"/>
        <menuitem id="training_subscription_mass_mi" parent="training_subscription_management_mi" action="training_subscription_mass_act" icon="STOCK_EXECUTE" sequence="30"/>
        <menuitem id="training_subscription_management_subscription_line_all_mi" parent="training_subscription_management_mi" action="training_subscription_line_all_act" sequence="40"/>
        <menuitem id="subscription_line_second_all_mi" parent="training_subscription_management_mi" action="subscription_line_second_all_act" sequence="50"/>
        <!--Participation-->
        <menuitem id="training_participation_mi" name="Participations" parent="training_mi" sequence="10"/>
        <menuitem id="training_participation_all_mi" name="Participants" parent="training_participation_mi" action="action_training_participation_all" sequence="10"/>
        <menuitem  id="training_participation_reassign_wiz_mi" name="Participation Reassignation" parent="training_participation_mi" action="training_participation_reassign_wiz_act" groups="base.group_erp_manager" sequence="20"/>
        <menuitem id="stakeholder_participation_requests_mi" name="Stakeholders Requests" parent="training_participation_mi" action="participation_stakeholder_request_act" sequence="30"/>
        <menuitem id="seance_stakeholder_participation_mi" name="Stakeholders Participations" parent="training_participation_mi" action="action_training_participation_stakeholder_all" sequence="40"/>
        <!--Configuration-->
        <menuitem id="training_config_mi" name="Configuration" parent="training_mi" sequence="30"/>
        <menuitem id="training_config_library_mi" parent="training_config_mi" name="Library"/>
        <menuitem id="training_config_library_categ_mi" parent="training_config_library_mi" name="Categorisation"/>
        <menuitem id="course_theme_all_mi" parent="training_config_library_categ_mi" action="course_theme_all_act"/>
        <menuitem id="training_config_library_product_line_mi" parent="training_config_library_categ_mi" action="training_course_category_all_act"/>
        <menuitem id="training_config_library_course_type_mi" parent="training_config_library_categ_mi" action="training_course_type_all_act"/>
        <menuitem id="training_config_library_offer_format_mi" parent="training_config_library_categ_mi" action="training_offer_format_all_act"/>
        <menuitem id="training_config_contact_function_mi" parent="training_config_library_mi" action="training_config_contact_function_act"/>
        <menuitem id="training_offer_public_mi" parent="training_config_library_mi" action="training_offer_public_act"/>
        <menuitem id="training_config_product_mi" parent="training_config_mi" action="training_config_product_all_act"/>
        <menuitem id="config_penality_mi" name="Penalities" parent="training_config_mi"/>
        <menuitem id="config_penality_all_mi" parent="config_penality_mi" action="training_config_penality_act"/>
        <menuitem id="config_invoice_all_mi" parent="config_penality_mi" action="training_config_invoice_act"/>

    </data>
</openerp>
